package com.scb.axcessspringb.controller;

import com.scb.axcessspringb.model.Approver;
import com.scb.axcessspringb.service.ApproverService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/api/approvers")
@CrossOrigin(origins = "http://localhost:3000")
public class ApproverController {

    @Autowired private ApproverService approverService;

    @GetMapping("/batch/{batchId}")
    public ResponseEntity<List<Approver>> getApprovers(@PathVariable String batchId) {
        return ResponseEntity.ok(approverService.getApproversForBatch(batchId));
    }

    @PostMapping("/{id}/approve")
    public ResponseEntity<Approver> approve(@PathVariable Long id) {
        return ResponseEntity.ok(approverService.approveBatch(id));
    }

    @PostMapping("/{id}/reject")
    public ResponseEntity<Approver> reject(@PathVariable Long id) {
        return ResponseEntity.ok(approverService.rejectBatch(id));
    }
}
